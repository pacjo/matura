#include <bits/stdc++.h>

using namespace std;

int reverse_num(int n) {

    string sn = to_string(n);
    reverse(sn.begin(), sn.end());

    return stoi(sn);

}

int main() {

    int tab_size = 4000000;
    //bool tab[tab_size];
    // @@@@@@             .......,,,,,,******////////(((((((((((((((######################################################@@@@@
    // @@@@@@      ,,,     .......,,,,,******//////,.,(((((((((((((((#####################################################@@@@@
    // @@@@@@     ,/@,,      ......,,,,,,*****.     .,,,, .(((((((((#(#(##################################################@@@@@
    // @@@@@@ ///,####(,***   ......,,,,,****         ...   (((((((((##############*#**######**#####*##****/#*(###########@@@@@
    // @@@@@@ /@&#%,@,@,@@%   ......,,,,,*****#.(*%%%&&&&#&(*(((((((((#(###########***#######**(*###*##****####*###(((((((@@@@@
    // @@@@@@    .,@@@,       .......,,,,,***,(% /%&&(/*&#/(((((((((((((###########################(((#(((((((((((((((((((@@@@@
    // @@@@@@      ,@,        .......,,,,,**** .%(((#(%&((#/(((((((((((((((####(#######(((((((((((((((((((((((((((((((((((@@@@@
    // @@@@@@       ,        . ......,,,,,,***** #%&%#%#(/./((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((@@@@@
    // @@@@@@              .............,,,****** (%%%(///////((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((@@@@@
    // @@@@@@           ...........,,,,,,,..,***.((/(((((#(%%##((((((((((*#&#((((((((((((((((((((((((((((/////////////////@@@@@
    // @@@@@@......... ...........,,,,,,,,**,////,*,((/***///(//%&**,%*%&((((/..,%%#(((((((((((((((((/////////////////////@@@@@
    // @@@@@@....................,,,,,,,,*. /********,##/...,*/###%##*    ........,/%%%((((///////////////////////////////@@@@@
    // @@@@@@.................,,,,,,,,,,,***/(/(*#/*//#(###./%##( .%.......,.,,.,,**&%%%#/////////////////////////////////@@@@@
    // @@@@@@............,,,,,,,,,,,,,,,,*********((,*#%.,**/%% / ,%,,..,.,,********(&%&%%/////////////*******************@@@@@
    // @@@@@@...........,,,,,,,,,,,,,,,,,*******,/%&# *&%#%&*/( (/(//,,,,,**/((######&&&%%%////////***********************@@@@@
    // @@@@@@,,,,,,,,,,,,,,,,,,,,,,,,,,,,******* .&% .&%.,&,*&%((((#&#######%%%%#(/%%#&&&%#///****************************@@@@@
    // @@@@@@,,,,,,,,,,,,,,,,,,,,,,,,,,,,**, */(,%%#.,.,*,(#%&&& #%%%%%%%%%###########%%%#********************************@@@@@
    // @@@@@@,,,,,,,,,,,,,,,,,,,,,,,,,,* .//(#####%&&%##%#%%&%&&&(###&###%%%%%#######((##*****************,,,,,,,,,,,,,,,,@@@@@
    // @@@@@@,,,,,,,,,,,,,,,,,,,,,,,,,,,*********/****.*/#%%%%&**/%&%%&%%%%%#////(#####**,,,,,,,,,,,,,,,,,,,,.,.,,,,,,,,,,@@@@@
    // @@@@@@,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,***********,%%%%*******/###//***(&&&/*********,,,,,,,,,,.,...........,,,,.....@@@@@
    // @@@@@@,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,***** (%%********************%%*********,,,,,,,,..................,.....@@@@@
    // @@@@@@,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,*,**,***.#%*********************,%(*****,,,,,,,,,..........................@@@@@
    // @@@@@@,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, #%,,,,******,*,,,*******,#%*,,,,,,,,,,,,...........................@@@@@
    // @@@@@@,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,/#*,,,,,,,,,,,,,,,,,,,,,,,#&#,,,,,,,,,,,.......,,,,,,,,,............@@@@@
    // @@@@@@,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.%%,*(#######(*****,****************,,..........,,,,,,,,,,...,,,,..,,@@@@@
    // @@@@@@,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,/ %&####%%,,,,,,,,,,,,,,,,,,,,,,,,,******................,,,,,,,,,...,,@@@@@
    // @@@@@@,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,/####  .#  ,,,,,,,,     ....,.......,,,,,,,,,,,*,............,,,,,,,,,,....@@@@@
    //
    // yea, so this was ment to show vector from "despicable me"
    // https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DZ2RYdGbE4vI&psig=AOvVaw3hlAuI4r7DmloeRufkkp_i&ust=1684501180994000&source=images&cd=vfe&ved=0CBEQjRxqFwoTCIj8hob2_v4CFQAAAAAdAAAAABAE
    // i don't care it's a google gallery url to pointing youtube, whatever
    //
    vector<bool> tab(tab_size);
    fill_n(tab.begin(), tab_size, true);

    for (int i = 2; i < tab_size; i++) {

        for (int j = 2*i; j < tab_size; j+=i) tab[j] = false;

    }

    //cout << reverse_num(1297001) << " " << tab[reverse_num(1297001)] << endl;

    //for (int i = 0; i < 25; i++) cout << tab[i] << " ";

    //fstream liczby("liczby.txt"); int n = 300;
    fstream pierwsze("pierwsze.txt"); int m = 200;
    //fstream liczby("liczby_przyklad.txt"); int n = 50;
    //fstream pierwsze("pierwsze_przyklad.txt"); int m = 50;

    for (int i = 0; i < m; i++) {

        int num; pierwsze >> num;

        //cout << num << " " << reverse_num(num) << endl;

        if (tab[num])
            if (tab[reverse_num(num)])
                cout << num << endl;

    }

    return 0;
}
